# Last edited on 2025-04-09 20:25:59 by stolfi

Scene: four object (pyramid, cone, shpere, flat disk) over a flat background,
with partly smooth, partly rough texture.

Images MF-Z.fni and PM-N.fni were generated by Gustavo with multifocal
stereo and photometric stereo applied to a synthetic stack which was
genrated by test_mfok_scene_make_frame.c in
JSLIBS/libmultifok/tests/0100_scene_make_frame

The weights in image MF-Z.fni were mapped from [0.01_0.99] to [0_1]. The
height values in image MF-Z.fni were scaled from [0_1] to [30_96] except
that entries with weight 0 were mapped to 0.

gawk \
  ' /^ *[0-9]+ /{ 
      x = $1; y = $2; z = $3; w = $4;
      ww = (w - 0.01)/(0.99 - 0.01);
      if (ww < 0) { ww = 0; }
      if (ww > 1) { ww = 1; }
      if (ww == 0)
        { zz = 0; }
      else
        { zz = 30 + (96 - 30)*z; }
      printf "%5d %5d %+15.7e %8.6f\n", x, y, zz, ww
      next;
    }
    // { print; next; }
  '
        

Image RF-Z.fni is the ideal height produced directly by test_mfok_scene_make_frame.c,
converted from PNG (RF-Z.png) to FNI.
